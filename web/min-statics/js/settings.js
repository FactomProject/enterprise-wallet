$("#save-changes").on("click",function(){theme=$("#darkTheme").is(":checked");exportKeys=$("#export-keys").is(":checked");coinControl=$("#coin-control").is(":checked");importExport=$("#import-export").is(":checked");var a={Values:[]};a.Values.push(theme);a.Values.push(exportKeys);a.Values.push(coinControl);a.Values.push(importExport);j=JSON.stringify(a);postRequest("adjust-settings",j,function(a){obj=JSON.parse(a);"none"==obj.Error?window.location.href+="?success=true":SetGeneralError("Error: "+obj.Error)})});
$("#export-seed").on("click",function(){postRequest("get-seed","",function(a){obj=JSON.parse(a);"none"==obj.Error?(a=document.createElement("a"),a.download="WalletSeed.txt",a.href="data:text/plain;charset=UTF-8,"+encodeURIComponent(obj.Content),a.click()):SetGeneralError("Error: "+obj.Error)})});$("#import-file").on("click",function(a){document.getElementById("uploaded-file").click()});
$("#uploaded-file").on("change",function(){(input=document.getElementById("uploaded-file"))?input.files?input.files[0]?(file=input.files[0],fr=new FileReader,fr.onload=receivedText,fr.readAsText(file)):SetGeneralError("Please select a file before clicking 'Import From File'"):SetGeneralError("This browser doesn't seem to support the `files` property of file inputs."):SetGeneralError("Error: Couldn't find the fileinput element.")});
function receivedText(){document.getElementById("data-expand").click();is=fr.result;len=is.split(" ");12!=len.length?SetGeneralError("Seed must be 12 words"):($("#import-seed-reveal-text").text(fr.result),$("#import-seed-reveal-cancel").click())}
$("#import-seed-reveal-confirm").on("click",function(){seed=$("#import-seed-reveal-text").text();j=JSON.stringify({Seed:seed});postRequest("import-seed",j,function(a){obj=JSON.parse(a);console.log(obj);"none"==obj.Error?SetGeneralSuccess("Seed has been changed to: "+obj.Content):SetGeneralError("Error: "+obj.Error)})});
